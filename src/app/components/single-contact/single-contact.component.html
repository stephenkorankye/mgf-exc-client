<div class="container mt-5 mb-5">

  <div *ngIf="!submitted" class="card">
    <div class="card-header bg-primary text-white">
      <h4>Contact Details</h4>
    </div>
    <div class="card-body">
      <div class="row">
        
        <div class="col-md-4">
          <div class="avatar bg-secondary text-white text-center p-4 rounded">
            <i class="fas fa-user fa-8x mt-4"></i>
          </div>
        </div>
        <div class="col-md-8">
          <h4 class="card-title mb-3">{{staticContact?.firstname}} {{staticContact?.lastname}}</h4>
          <p class="card-text">
            <i class="far fa-envelope mb-3"></i> {{ staticContact?.email }}
            <br>
            <i class="fas fa-building mb-3"></i> {{ staticContact?.company?.name }}
            <br>
            <i class="fas fa-map-marker-alt mb-2"></i> {{ staticContact?.company?.postcode}} 
          </p>
         
          
        </div>
      </div>
      <hr>
      <div class="row">
        <div class="col-md-12">
          <h5>Edit Contact Details</h5>

          <div  class="row">
            
              <div class="form-group col-md-6 mb-3">
                <label for="firstname">Firstname</label>
                <input type="text" class="form-control" id="firstname" name="firstname" placeholder="Contact Firstname" [(ngModel)]="contact.firstname" required />
              </div>
              <div class="form-group col-md-6 mb-3">
                <label for="lastname">Lastname</label>
                <input type="text" class="form-control" id="lastname" name="lastname" placeholder="Contact Lastname" [(ngModel)]="contact.lastname" required />
              </div>
              <div class="form-group col-md-6 mb-3">
                <label for="email">Email </label>
                <input type="email" class="form-control" id="email" name="email" placeholder="Contact Email" [(ngModel)]="contact.email" required />
              </div>
              <div class="form-group col-md-6 mb-3">
                <label for="company">Company</label>
                <select class="form-control" id="company" name="company" [(ngModel)]="contact.company.name" (change)="onCompanyChange($event)" >
                    <option [value]="contact.company.id" selected="">{{contact.company.name}}</option>
                    <option *ngFor="let company of companies" [value]="company.id" >{{company.name}}</option>
                    <option *ngIf="loading">loading... </option>
                </select>
              </div>
              
              <div class="form-group col-md-12"> 
              <button (click)="updateContact()" type="button" class="btn btn-primary">Update Details</button>
              </div>
          </div>

        </div>
      </div>
    </div>
    <div class="card-footer">
      <a routerLink="/contacts" class="btn btn-secondary">
        <i class="fas fa-arrow-left"></i> Back to Contacts
      </a>
    </div>
  </div>


  <div *ngIf="submitted">
    <h4>Contact Updated Success </h4>
    <a href="javascript:void(0);" (click)="reloadPage()" class="btn btn-success mt-3" >Return to Contact Details</a>
  </div>

</div>
